/*
 * Helpers by yaza
 */
function visiblePassword(e,t){$(document).on("click",e,function(){var e=$(t);"password"===e.attr("type")?e.attr("type","text"):e.attr("type","password")})}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(".modal").on("hidden.bs.modal",function(){$(this).find("form")[0].reset(),$("#id").val("")}),$(".required").append(' <span style="color:red">*</span>');const assets=$("#asset-url").val()?$("#asset-url").val():location.protocol+"//"+location.host+"/";var loadingSpiner='<img src="'+assets+'/helpers/img/loadingCircle.gif" style="width: 22px;">';function sweetError(e){Swal.fire({title:"Error",text:e,type:"error"})}function sweetInfo(e){Swal.fire({title:"Info",text:e,type:"info"})}function sweetSuccess(e,t=null,o=!1){null!==t?Swal.fire({title:e,type:"success",text:"Klik tombol selesai untuk kembali ke halaman sebelumnya",showCancelButton:!0,cancelButtonText:o?"Edit Lagi":"Buat Lagi",confirmButtonColor:"#ff4d4d",confirmButtonText:"Selesai"}).then(e=>{e.value?window.location.href=t:1==o&&location.reload()}):(1==o&&location.reload(),Swal.fire({title:"Success!",text:e,type:"success"}))}function toastSuccess(e,t="top-right"){$.toast({heading:"Success",text:e,position:t,stack:!1,icon:"success",bgColor:"#10ac84",textColor:"white",loaderBg:"#1dd1a1"})}function toastError(e,t="top-right"){$.toast({heading:"Error",text:e,position:t,stack:!1,icon:"error",bgColor:"#ee5253",textColor:"white",loaderBg:"#ff6b6b"})}function toastWarning(e,t="top-right"){$.toast({heading:"Warning",text:e,position:t,stack:!1,icon:"warning",bgColor:"#cc8e35",textColor:"white",loaderBg:"#ffb142"})}function snackbar(e){Snackbar.show({text:e,actionTextColor:"#FFFFFF",pos:"bottom-center",actionText:"Close"})}function snackbarSuccess(e){Snackbar.show({text:e,actionTextColor:"#155724",pos:"bottom-center",actionText:"Close",backgroundColor:"#d4edda",textColor:"#155724"})}function snackbarWarning(e){Snackbar.show({text:e,actionTextColor:"#856404",pos:"bottom-center",actionText:"Close",backgroundColor:"#fff3cd",textColor:"#856404"})}function snackbarError(e){Snackbar.show({text:e,actionTextColor:"#721c24",pos:"bottom-center",actionText:"Close",backgroundColor:"#f8d7da",textColor:"#721c24"})}function notifySuccess(e){notify({type:"success",title:"Success",position:{x:"right",y:"top"},icon:'<img src="'+assets+'helpers/img/paper_plane.png" />',message:e,autoHide:!0,delay:2500})}function notifyWarning(e){notify({type:"warning",title:"Warning",theme:"dark-theme",position:{x:"right",y:"top"},icon:'<img src="'+assets+'helpers/img/paper_plane.png" />',message:e,autoHide:!0,delay:2500})}function notifyError(e){notify({type:"error",title:"Error",theme:"dark-theme",position:{x:"right",y:"top"},icon:'<img src="'+assets+'helpers/img/paper_plane.png" />',message:e,autoHide:!0,delay:2500})}function handleValidation(e){$(".invalid-feedback").remove();for(let t in e){for(let o in e[t])$("[name="+t+"]").addClass("is-invalid").after('<div class="text-left invalid-feedback">'+e[t][o]+"</div>");$("[name="+t+"]").keypress(function(){$("[name="+t+"]").removeClass("is-invalid")}),$("[name="+t+"]").change(function(){$("[name="+t+"]").removeClass("is-invalid")})}}function reloadTable(e){var t=$(e).DataTable();t.cleanData,t.ajax.reload()}function ajaxPost(e,t,o=null){if(null!==o)var n=$(o).html();return $.ajax({type:"post",url:e,data:t,dataType:"json",contentType:!1,processData:!1,beforeSend:function(){null!==o&&$(o).empty().append(loadingSpiner).prop("disabled",!0).css("cursor","wait")},complete:function(){}}).done(function(e){}).fail(function(e){let t=e.responseJSON;t.errors||t.invalid?new handleValidation(t.errors||t.invalid):new sweetError("Terjadi Kesalahan")}).always(function(){null!==o&&$(o).empty().append(n).prop("disabled",!1).css("cursor","auto")})}function ajaxPostFile(e,t,o=null,n="#loading-body"){if($(n).empty().html('<div class="progress" style="display:none;">\n<div class="progress-bar bg-danger progress-bar-striped\nactive" role="progressbar"\naria-valuemin="0" aria-valuemax="100" style="width:0%">\n0%\n</div>\n</div>'),null!==o)var a=$(o).html();return $.ajax({type:"post",url:e,data:t,dataType:"json",contentType:!1,processData:!1,beforeSend:function(){null!==o&&$(o).empty().append(loadingSpiner).prop("disabled",!0).css("cursor","wait"),$(".progress").fadeIn()},complete:function(){},xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;t=parseInt(100*t),$(".progress-bar").width(t+"%"),$(".progress-bar").html(t+"%")}},!1),e}}).done(function(e){}).fail(function(e){let t=e.responseJSON;t.errors||t.invalid?new handleValidation(t.errors||t.invalid):new sweetError("Terjadi Kesalahan")}).always(function(){null!==o&&$(o).empty().append(a).prop("disabled",!1).css("cursor","auto"),$(".progress").fadeOut()})}function ajaxGet(e,t=!1){return $.ajax({type:"get",url:e,dataType:"json",contentType:!1,processData:!1,beforeSend:function(){1==t&&new showBlockUI}}).done(function(e){}).fail(function(e){new sweetError("Terjadi Kesalahan")}).always(function(){1==t&&new hideBlockUI})}function ajaxDel(e,t,o=null){Swal.fire({title:"Apakah kamu yakin?",text:"Data akan dihapus dan tidak akan bisa dikembalikan!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff4d4d",confirmButtonText:"Hapus"}).then(n=>{n.value&&$.ajax({type:"POST",url:e,data:{id:t},dataType:"json",success:function(e){1==e.success?(new notifySuccess(e.message),null!==o&&reloadTable(o)):new sweetError(e.message)},error:function(e){new sweetError("Terjadi Kesalahan")}})})}function formatRupiah(e,t){var o=e.replace(/[^,\d]/g,"").toString().split(","),n=o[0].length%3,a=o[0].substr(0,n),r=o[0].substr(n).match(/\d{3}/gi);return r&&(separator=n?".":"",a+=separator+r.join(".")),a=null!=o[1]?a+","+o[1]:a,null==t?a:a?"Rp. "+a:""}function setTimeZone(){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;document.cookie="timezone ="+e+";secure"}function setParam(e,t,o){var n="([&?]|&amp;)"+(t=encodeURIComponent(t))+"\\b(?:=(?:[^&#]*))*",a=document.createElement("a"),r=new RegExp(n),i=t+(o?"="+encodeURIComponent(o):"");a.href=e;var s=a.search.replace(r,"$1"+i);return s===a.search?a.search+=(a.search?"&":"")+i:a.search=s,a.href}function datatable(e,t,o=[],n=[],a=!0){$(e).DataTable({ordering:!0,serverSide:!0,processing:!0,autoWidth:!a,responsive:a,oLanguage:{sProcessing:loadingSpiner},ajax:{url:t},drawCallback:function(e){$('[data-toggle="tooltip"]').tooltip();[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(e){return new bootstrap.Tooltip(e)})},columns:o,columnDefs:n})}function showBlockUI(){$.blockUI({message:"Mohon Tunggu Sebentar ...",css:{"z-index":10002,border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"}})}function hideBlockUI(){$.unblockUI()}$(".convert-currency").on("keyup",function(){$(this).val(formatRupiah(this.value,"Rp. "))});
